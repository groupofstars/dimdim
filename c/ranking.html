<style>
  .info-box.bg-default.dark{
    background: #454d55;
  }

  .img-fluid.conquista-img {
    width: 90px;
    border-radius: 5px;
    padding: 10px;
    box-shadow: 1px 1px 1px rgba(0,0,0,0.2);
    background: rgba(0,0,0,0.3);
    cursor: pointer;
  }

  .badge-where {
  position: absolute;
  top: -25px;
  padding: 15px;
  left: -110px;
  background: #454d55 !important;
  border: 1px solid;
  font-size: 13px;
  font-weight: 700;
}

.card-venda{
  margin-bottom: 5px;
}

.image-afd{
  position: relative;
  width: 70px;
  text-align: center;
  padding: 12px;
  border-radius: 10px;
  height: 70px;
  top: -12px;
  left: 95%;
  /*border-style: dashed;*/
  /*border-color: #f0f0f0;*/
}

.card-afd-ranking{
  width: 70%;
}

.badge.badge-afd{
  position: relative;
  top: 15px;
  padding: 5px;
  width: 90px;
  text-align: center;
  left: -22px;
  
}

.image-afd.one{
  background: #f7b34a !important;
}

.image-afd.two{
  background: #9e9e9e !important;
}

.image-afd.tree{
  background:#cd732f !important
}


.badge.badge-afd.one{
  background: #f7b34a !important;
}
.badge.badge-afd.two{
  background: #9e9e9e !important;
}
.badge.badge-afd.tree{
  background: #cd732f !important
}


.active-me{
  border: 1px solid white;
}

.nome-afd {
  position: absolute;
  left: 35%;
  text-transform: uppercase;
  letter-spacing: 3px;
}

.foto-afd{
  border-radius: 5%;
  height: 80px;
  width: 80px;
  background-position: center;
  position: absolute;
  top: 13px;
  border: 1px solid white;
}
.vendas-dados {
  position: absolute;
  top: 65px;
  left: 30%;
  background: rgba(0,0,0,0.2);
  padding: 5px;
  border-left: 2px solid white;
  border-radius: 3px;
  font-size: 13px;
  width: 120px;
  text-align: center;
}

.card-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 2;
  color: white;
  font-size: 24px;
  font-weight: bold;
  text-align: center;
}
.card-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  z-index: 1;
}

.badge-afd-none {
  font-size: 15px;
  position: relative;
  left: -80px;
}
</style>


  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper" style="max-height: 609px;overflow-y: scroll;">
     <section class="content-header bg-primary" style="height:120px;">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col">
            <h1>Ranking dos Afiliados</h1>
          </div>
          <div class="col-auto">
           
          </div>
         
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <section  style="position: relative;top: -30px;padding-left: 5px;padding-right: 5px;">
      


      <div class="row">
        <div class="col-12 col-lg-7">
          <div class="card">
            <div class="card-header">
              Ranking de Vendas
            </div>
            <div class="card-body list-ranking" style="overflow-x: auto;">

            </div>
          </div>
        </div>

        <div class="col-12 col-lg-5">
          <div class="card">
            <div class="card-header">
              Posição e Premiações
            </div>
            <div class="card-body">
              
              <div class="info-box bg-default dark">
                  <span class="info-box-icon">
                    <i class="fas fa-trophy"></i>
                  </span>
                  <div class="info-box-content">
                    <span class="info-box-text">
                        Minha Posição
                    </span>
                    <span class="info-box-number" id="m-position">
                      0
                    </span>
                  </div>
              </div>


              <div class="card dark">
                <div class="card-header">
                  Minhas Consquistas
                </div>
                <div class="card-body">

                  <div class="card-overlay"></div>
                  <div class="card-text">Em Construção</div>

                  <div class="row conquistas-list" style="filter: blur(3px);">
                    <div class="col-4 col-md-3 card-venda">
                      <span class="badge badge-default badge-where" style="display:none;">
                        Primeira Venda
                      </span>
                      <img class="img-fluid conquista-img" src="https://cdn-icons-png.flaticon.com/512/4319/4319092.png">
                    </div>

                      <div class="col-4 col-md-3 card-venda">
                      <span class="badge badge-default badge-where" style="display:none;">
                        TOP Afiliado
                      </span>
                      <img class="img-fluid conquista-img" src="https://cdn-icons-png.flaticon.com/512/5553/5553769.png">
                    </div>


                    <div class="col-4 col-md-3 card-venda">
                      <span class="badge badge-default badge-where" style="display:none;">
                        10 Vendas
                      </span>
                      <img class="img-fluid conquista-img" src="https://cdn-icons-png.flaticon.com/512/344/344464.png">
                    </div>

                     <div class="col-4 col-md-3 card-venda">
                      <span class="badge badge-default badge-where" style="display:none;">
                        Primeira Venda
                      </span>
                      <img class="img-fluid conquista-img" src="https://cdn-icons-png.flaticon.com/512/4319/4319092.png">
                    </div>



                    <div class="col-4 col-md-3 card-venda">
                      <span class="badge badge-default badge-where" style="display:none;">
                        TOP Afiliado
                      </span>
                      <img class="img-fluid conquista-img" src="https://cdn-icons-png.flaticon.com/512/5553/5553769.png">
                    </div>




                  </div>
                </div>
              </div>


            </div>
          </div>
        </div>
      </div>
    </section>

</div>


<script>

$(".conquistas-list").on('mouseenter', '.conquista-img', function(){
  $(this).closest('.card-venda').find(".badge-where").css("display", "block");
});

$(".conquistas-list").on('mouseleave', '.conquista-img', function(){
  $(this).closest('.card-venda').find(".badge-where").css("display", "none");
});
  
ranking();
function ranking(){
  user = 'user='+localStorage.getItem('usermail');
  $.post("whats/afiliado/ranking.php", user, (t)=>{
    if(t != 0){
      list = '';
      t = JSON.parse(t);
      $("#m-position").html(t.position);

      t.ranking.forEach((r, index)=>{

        if(index == 0){
          classe = 'one';
          imagem = 'https://cdn-icons-png.flaticon.com/512/610/610295.png';
          lugar = `<span class="badge badge-afd one">
                        1° LUGAR
                      </span>`;

        }else if(index == 1){

          classe = 'two';
          imagem = 'https://cdn-icons-png.flaticon.com/512/2583/2583319.png';
          lugar = `<span class="badge badge-afd two">
                        2° LUGAR
                      </span>`;



        }else if(index == 2){

          classe = 'tree';
          imagem = 'https://cdn-icons-png.flaticon.com/512/2583/2583434.png';
          lugar = `<span class="badge badge-afd tree">
                        3° LUGAR
                      </span>`;

          
        }else{
          classe = '';
          imagem = '';
          lugar = `<span class="badge badge-afd-none">
                        ${index+1}° LUGAR
                      </span>`;
        }

        if(r.me == true){
          me = 'active-me';
        }else{
          me = '';
        }
        list += ` <div class="card ${me}" style="width:75%;">
                  <div class="card-body">

                  <img class="img-fluid foto-afd" src="whats/dados/images/${r.img}">

                  <strong class="nome-afd">
                    ${r.afiliado}
                  </strong>

                  <div class="vendas-dados">
                    <b>VENDAS: ${r.total_vendas}</b>
                  </div>

                  <div class="image-afd ${classe}">
                      <img class="img-fluid" src="${imagem}" style="width: 55px;">


                      ${lugar}
                    </div>
                  </div>
                </div>`;

      })


    }else{

    }

    $(".list-ranking").html(list);
  })
}
</script>
